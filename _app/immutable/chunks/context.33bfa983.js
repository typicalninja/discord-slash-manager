import{a as B,t as I}from"./index.27e9b36e.js";import{F as H,P as T,Q as V}from"./scheduler.80efcbe1.js";function se(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ie(e,t){e.d(1),t.delete(e.key)}function re(e,t){I(e,1,1,()=>{t.delete(e.key)})}function oe(e,t,n,s,i,l,c,h,f,v,r,d){let y=e.length,p=l.length,w=y;const F={};for(;w--;)F[e[w].key]=w;const o=[],a=new Map,E=new Map,C=[];for(w=p;w--;){const u=d(i,l,w),b=n(u);let m=c.get(b);m?s&&C.push(()=>m.p(u,t)):(m=v(b,u),m.c()),a.set(b,o[w]=m),b in F&&E.set(b,Math.abs(w-F[b]))}const S=new Set,O=new Set;function g(u){B(u,1),u.m(h,r),c.set(u.key,u),r=u.first,p--}for(;y&&p;){const u=o[p-1],b=e[y-1],m=u.key,j=b.key;u===b?(r=u.first,y--,p--):a.has(j)?!c.has(m)||S.has(m)?g(u):O.has(j)?y--:E.get(m)>E.get(j)?(O.add(m),g(u)):(S.add(j),y--):(f(b,c),y--)}for(;y--;){const u=e[y];a.has(u.key)||f(u,c)}for(;p;)g(o[p-1]);return H(C),o}class Q{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const n={listener:t};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const D=typeof window>"u"||"Deno"in window;function ue(){}function le(e,t){return typeof e=="function"?e(t):e}function ce(e){return typeof e=="number"&&e>=0&&e!==1/0}function ae(e,t){return Math.max(e+(t||0)-Date.now(),0)}function fe(e,t,n){return L(e)?typeof t=="function"?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function he(e,t,n){return L(e)?[{...t,queryKey:e},n]:[e||{},t]}function de(e,t){const{type:n="all",exact:s,fetchStatus:i,predicate:l,queryKey:c,stale:h}=e;if(L(c)){if(s){if(t.queryHash!==J(c,t.options))return!1}else if(!R(t.queryKey,c))return!1}if(n!=="all"){const f=t.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||typeof i<"u"&&i!==t.state.fetchStatus||l&&!l(t))}function ye(e,t){const{exact:n,fetching:s,predicate:i,mutationKey:l}=e;if(L(l)){if(!t.options.mutationKey)return!1;if(n){if(P(t.options.mutationKey)!==P(l))return!1}else if(!R(t.options.mutationKey,l))return!1}return!(typeof s=="boolean"&&t.state.status==="loading"!==s||i&&!i(t))}function J(e,t){return((t==null?void 0:t.queryKeyHashFn)||P)(e)}function P(e){return JSON.stringify(e,(t,n)=>K(n)?Object.keys(n).sort().reduce((s,i)=>(s[i]=n[i],s),{}):n)}function R(e,t){return k(e,t)}function k(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!k(e[n],t[n])):!1}function N(e,t){if(e===t)return e;const n=M(e)&&M(t);if(n||K(e)&&K(t)){const s=n?e.length:Object.keys(e).length,i=n?t:Object.keys(t),l=i.length,c=n?[]:{};let h=0;for(let f=0;f<l;f++){const v=n?f:i[f];c[v]=N(e[v],t[v]),c[v]===e[v]&&h++}return s===l&&h===s?e:c}return t}function pe(e,t){if(e&&!t||t&&!e)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function M(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function K(e){if(!A(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!A(n)||!n.hasOwnProperty("isPrototypeOf"))}function A(e){return Object.prototype.toString.call(e)==="[object Object]"}function L(e){return Array.isArray(e)}function U(e){return new Promise(t=>{setTimeout(t,e)})}function x(e){U(0).then(e)}function we(){if(typeof AbortController=="function")return new AbortController}function ve(e,t,n){return n.isDataEqual!=null&&n.isDataEqual(e,t)?e:typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?N(e,t):t}class G extends Q{constructor(){super(),this.setup=t=>{if(!D&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.focused!==t&&(this.focused=t,this.onFocus())}onFocus(){this.listeners.forEach(({listener:t})=>{t()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const W=new G,q=["online","offline"];class X extends Q{constructor(){super(),this.setup=t=>{if(!D&&window.addEventListener){const n=()=>t();return q.forEach(s=>{window.addEventListener(s,n,!1)}),()=>{q.forEach(s=>{window.removeEventListener(s,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(s=>{typeof s=="boolean"?this.setOnline(s):this.onOnline()})}setOnline(t){this.online!==t&&(this.online=t,this.onOnline())}onOnline(){this.listeners.forEach(({listener:t})=>{t()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const _=new X;function Y(e){return Math.min(1e3*2**e,3e4)}function Z(e){return(e??"online")==="online"?_.isOnline():!0}class z{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}}function be(e){return e instanceof z}function me(e){let t=!1,n=0,s=!1,i,l,c;const h=new Promise((o,a)=>{l=o,c=a}),f=o=>{s||(p(new z(o)),e.abort==null||e.abort())},v=()=>{t=!0},r=()=>{t=!1},d=()=>!W.isFocused()||e.networkMode!=="always"&&!_.isOnline(),y=o=>{s||(s=!0,e.onSuccess==null||e.onSuccess(o),i==null||i(),l(o))},p=o=>{s||(s=!0,e.onError==null||e.onError(o),i==null||i(),c(o))},w=()=>new Promise(o=>{i=a=>{const E=s||!d();return E&&o(a),E},e.onPause==null||e.onPause()}).then(()=>{i=void 0,s||e.onContinue==null||e.onContinue()}),F=()=>{if(s)return;let o;try{o=e.fn()}catch(a){o=Promise.reject(a)}Promise.resolve(o).then(y).catch(a=>{var E,C;if(s)return;const S=(E=e.retry)!=null?E:3,O=(C=e.retryDelay)!=null?C:Y,g=typeof O=="function"?O(n,a):O,u=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,a);if(t||!u){p(a);return}n++,e.onFail==null||e.onFail(n,a),U(g).then(()=>{if(d())return w()}).then(()=>{t?p(a):F()})})};return Z(e.networkMode)?F():w().then(F),{promise:h,cancel:f,continue:()=>(i==null?void 0:i())?h:Promise.resolve(),cancelRetry:v,continueRetry:r}}function ee(){let e=[],t=0,n=r=>{r()},s=r=>{r()};const i=r=>{let d;t++;try{d=r()}finally{t--,t||h()}return d},l=r=>{t?e.push(r):x(()=>{n(r)})},c=r=>(...d)=>{l(()=>{r(...d)})},h=()=>{const r=e;e=[],r.length&&x(()=>{s(()=>{r.forEach(d=>{n(d)})})})};return{batch:i,batchCalls:c,schedule:l,setNotifyFunction:r=>{n=r},setBatchNotifyFunction:r=>{s=r}}}const Ee=ee(),$="$$_queryClient",Se=()=>{const e=V($);if(!e)throw new Error("No QueryClient was found in Svelte context. Did you forget to wrap your component with QueryClientProvider?");return e},Fe=e=>{T($,e)};export{ie as A,Q as S,D as a,Ee as b,me as c,be as d,Z as e,ye as f,we as g,J as h,ce as i,W as j,fe as k,le as l,de as m,ue as n,_ as o,he as p,P as q,ve as r,R as s,ae as t,Fe as u,se as v,oe as w,re as x,pe as y,Se as z};
