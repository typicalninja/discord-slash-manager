import{P as Ie,s as qe,f as S,a as q,l as I,g as A,h as Q,d as _,c as R,r as X,m as T,j as y,i as k,u as b,Q as G,E as Y,n as W,v as ue,F as _e,w as de,e as ce,K as Re,R as Me,S as Te,T as De,N as Qe,U as ke}from"../chunks/scheduler.1ba8a949.js";import{S as Ue,i as je}from"../chunks/index.7a6c6b44.js";import"../chunks/paths.840f63e9.js";import{p as Be}from"../chunks/stores.b4c239cb.js";import{f as Ce}from"../chunks/api.9079f6dc.js";import{t as B}from"../chunks/constants.85e98373.js";import{b as ze}from"../chunks/localStore.880e2f61.js";import{c as He}from"../chunks/createQuery.e1a1df87.js";import{w as le,d as oe}from"../chunks/index.72d7e731.js";import{t as Je}from"../chunks/Toaster.svelte_svelte_type_style_lang.7ad7c14e.js";var Se=Object.prototype.hasOwnProperty;function fe(t,e){var l,n;if(t===e)return!0;if(t&&e&&(l=t.constructor)===e.constructor){if(l===Date)return t.getTime()===e.getTime();if(l===RegExp)return t.toString()===e.toString();if(l===Array){if((n=t.length)===e.length)for(;n--&&fe(t[n],e[n]););return n===-1}if(!l||typeof t=="object"){n=0;for(l in t)if(Se.call(t,l)&&++n&&!Se.call(e,l)||!(l in e)||!fe(t[l],e[l]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}function Ke(t){return new Promise(e=>{t.subscribe(e)()})}function Ye(t,e,l){t.update(n=>(Fe(n,e,l),n))}function Xe(t){return JSON.parse(JSON.stringify(t))}function he(t){return t==null}function Ve(t){return he(t)||Object.keys(t).length<=0}function Le(t){let e=[];for(const[,l]of Object.entries(t)){const n=typeof l=="object"?Le(l):[l];e=[...e,...n]}return e}function pe(t,e,l={}){for(const n in e)switch(!0){case(e[n].type==="object"&&!Ve(e[n].fields)):{l[n]=pe(t[n],e[n].fields,{...l[n]});break}case e[n].type==="array":{const i=t&&t[n]?t[n]:[];l[n]=i.map(s=>{const r=pe(s,e[n].innerType.fields,{...l[n]});return Object.keys(r).length>0?r:""});break}default:l[n]=""}return l}const Ge=fe;function me(t,e){if(Array.isArray(t))return t.map(n=>me(n,e));const l={};for(const n in t)l[n]=typeof t[n]=="object"&&!he(t[n])?me(t[n],e):e;return l}function Fe(t,e,l){if(new Object(t)!==t)return t;Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]);const n=e.slice(0,-1).reduce((i,s,r)=>new Object(i[s])===i[s]?i[s]:i[s]=Math.trunc(Math.abs(e[r+1]))===+e[r+1]?[]:{},t);return n[e[e.length-1]]=l,t}const D={assignDeep:me,cloneDeep:Xe,deepEqual:Ge,getErrorsFromSchema:pe,getValues:Le,isEmpty:Ve,isNullish:he,set:Fe,subscribeOnce:Ke,update:Ye},Ae="",We=!0;function Ze(t){return t.getAttribute&&t.getAttribute("type")==="checkbox"}function $e(t){return t.getAttribute&&t.getAttribute("type")==="file"}function xe(t){return $e(t)?t.files:Ze(t)?t.checked:t.value}const et=t=>{let e=t.initialValues||{};const l=t.validationSchema,n=t.validate,i=t.onSubmit,s={values:()=>D.cloneDeep(e),errors:()=>l?D.getErrorsFromSchema(e,l.fields):D.assignDeep(e,Ae),touched:()=>D.assignDeep(e,!We)},r=le(s.values()),c=le(s.errors()),o=le(s.touched()),a=le(!1),m=le(!1),f=oe(c,u=>D.getValues(u).every(E=>E===Ae)),d=oe(r,u=>{const g=D.assignDeep(u,!1);for(let E in u)g[E]=!D.deepEqual(u[E],e[E]);return g}),h=oe(d,u=>D.getValues(u).includes(!0));function C(u){return D.subscribeOnce(r).then(g=>P(u,g[u]))}function P(u,g){return ee(u,!0),l?(m.set(!0),l.validateAt(u,Ie(r)).then(()=>D.update(c,u,"")).catch(E=>D.update(c,u,E.message)).finally(()=>{m.set(!1)})):n?(m.set(!0),Promise.resolve().then(()=>n({[u]:g})).then(E=>D.update(c,u,D.isNullish(E)?"":E[u])).finally(()=>{m.set(!1)})):Promise.resolve()}function Z(u,g){return H(u,g),P(u,g)}function $(u){const g=u.target,E=g.name||g.id,p=xe(g);return Z(E,p)}function w(u){return u&&u.preventDefault&&u.preventDefault(),a.set(!0),D.subscribeOnce(r).then(g=>typeof n=="function"?(m.set(!0),Promise.resolve().then(()=>n(g)).then(E=>{if(D.isNullish(E)||D.getValues(E).length===0)return J(g);c.set(E),a.set(!1)}).finally(()=>m.set(!1))):l?(m.set(!0),l.validate(g,{abortEarly:!1}).then(()=>J(g)).catch(E=>{if(E&&E.inner){const p=s.errors();E.inner.map(O=>D.set(p,O.path,O.message)),c.set(p)}a.set(!1)}).finally(()=>m.set(!1))):J(g))}function z(){r.set(s.values()),c.set(s.errors()),o.set(s.touched())}function J(u){return Promise.resolve().then(()=>c.set(s.errors())).then(()=>i(u,r,c)).finally(()=>a.set(!1))}function H(u,g){D.update(r,u,g)}function ee(u,g){D.update(o,u,g)}function x(u){e=u,z()}return{form:r,errors:c,touched:o,modified:d,isValid:f,isSubmitting:a,isValidating:m,isModified:h,handleChange:$,handleSubmit:w,handleReset:z,updateField:H,updateValidateField:Z,updateTouched:ee,validateField:C,updateInitialValues:x,state:oe([r,c,o,d,f,m,a,h],([u,g,E,p,O,K,te,ne])=>({form:u,errors:g,touched:E,modified:p,isValid:O,isSubmitting:te,isValidating:K,isModified:ne}))}};function tt(t){let e,l=B(t[6].type)+"",n,i,s,r=t[2]==="global"?"global":`guild <span class="text-blurple-300">(${t[2]})</span>`,c;return{c(){e=I("Adding new "),n=I(l),i=I(" Interaction 	in "),s=new Te(!1),c=I(" scope"),this.h()},l(o){e=T(o,"Adding new "),n=T(o,l),i=T(o," Interaction 	in "),s=De(o,!1),c=T(o," scope"),this.h()},h(){s.a=c},m(o,a){k(o,e,a),k(o,n,a),k(o,i,a),s.m(r,o,a),k(o,c,a)},p(o,a){a&64&&l!==(l=B(o[6].type)+"")&&W(n,l),a&4&&r!==(r=o[2]==="global"?"global":`guild <span class="text-blurple-300">(${o[2]})</span>`)&&s.p(r)},d(o){o&&(_(e),_(n),_(i),s.d(),_(c))}}}function nt(t){let e;function l(s,r){return s[3].isLoading?st:s[3].isError?lt:it}let n=l(t),i=n(t);return{c(){i.c(),e=ce()},l(s){i.l(s),e=ce()},m(s,r){i.m(s,r),k(s,e,r)},p(s,r){n===(n=l(s))&&i?i.p(s,r):(i.d(1),i=n(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){s&&_(e),i.d(s)}}}function it(t){let e,l=B(t[4].type)+"",n,i,s,r=t[4].name+"",c,o,a,m=t[2]==="global"?"global":`guild <span class="text-blurple-300">(${t[2]})</span>`,f;return{c(){e=I("Editing "),n=I(l),i=q(),s=S("span"),c=I(r),o=I(" in "),a=new Te(!1),f=I(" scope"),this.h()},l(d){e=T(d,"Editing "),n=T(d,l),i=R(d),s=A(d,"SPAN",{class:!0});var h=Q(s);c=T(h,r),h.forEach(_),o=T(d," in "),a=De(d,!1),f=T(d," scope"),this.h()},h(){y(s,"class","font-bold text-green-400"),a.a=f},m(d,h){k(d,e,h),k(d,n,h),k(d,i,h),k(d,s,h),b(s,c),k(d,o,h),a.m(m,d,h),k(d,f,h)},p(d,h){h&16&&l!==(l=B(d[4].type)+"")&&W(n,l),h&16&&r!==(r=d[4].name+"")&&W(c,r),h&4&&m!==(m=d[2]==="global"?"global":`guild <span class="text-blurple-300">(${d[2]})</span>`)&&a.p(m)},d(d){d&&(_(e),_(n),_(i),_(s),_(o),a.d(),_(f))}}}function lt(t){let e,l,n,i;return{c(){e=S("span"),l=I("Oops Editor failed to fetch command (You wil not be able to edit command "),n=I(t[1]),i=I(")"),this.h()},l(s){e=A(s,"SPAN",{class:!0});var r=Q(e);l=T(r,"Oops Editor failed to fetch command (You wil not be able to edit command "),n=T(r,t[1]),i=T(r,")"),r.forEach(_),this.h()},h(){y(e,"class","text-red-300")},m(s,r){k(s,e,r),b(e,l),b(e,n),b(e,i)},p(s,r){r&2&&W(n,s[1])},d(s){s&&_(e)}}}function st(t){let e;return{c(){e=I("Please wait..")},l(l){e=T(l,"Please wait..")},m(l,n){k(l,e,n)},p:ue,d(l){l&&_(e)}}}function we(t){let e,l="Cannot edit a command name";return{c(){e=S("span"),e.textContent=l,this.h()},l(n){e=A(n,"SPAN",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1b54nku"&&(e.textContent=l),this.h()},h(){y(e,"class","text-yellow-300 text-xs")},m(n,i){k(n,e,i)},d(n){n&&_(e)}}}function Pe(t){let e,l=t[7].name+"",n;return{c(){e=S("span"),n=I(l),this.h()},l(i){e=A(i,"SPAN",{class:!0});var s=Q(e);n=T(s,l),s.forEach(_),this.h()},h(){y(e,"class","text-red-300 text-xs")},m(i,s){k(i,e,s),b(e,n)},p(i,s){s&128&&l!==(l=i[7].name+"")&&W(n,l)},d(i){i&&_(e)}}}function rt(t){let e,l,n=B(t[4].type)+"",i,s,r,c="Cannot edit command type";return{c(){e=S("span"),l=I("Interaction type: "),i=I(n),s=q(),r=S("span"),r.textContent=c,this.h()},l(o){e=A(o,"SPAN",{class:!0});var a=Q(e);l=T(a,"Interaction type: "),i=T(a,n),a.forEach(_),s=R(o),r=A(o,"SPAN",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-17zyva8"&&(r.textContent=c),this.h()},h(){y(e,"class","font-semibold"),y(r,"class","text-yellow-300 text-xs")},m(o,a){k(o,e,a),b(e,l),b(e,i),k(o,s,a),k(o,r,a)},p(o,a){a&16&&n!==(n=B(o[4].type)+"")&&W(i,n)},d(o){o&&(_(e),_(s),_(r))}}}function at(t){let e,l="Interaction type",n,i,s,r="Chat input (Slash command)",c,o="User",a,m="Message",f,d;return{c(){e=S("label"),e.textContent=l,n=q(),i=S("select"),s=S("option"),s.textContent=r,c=S("option"),c.textContent=o,a=S("option"),a.textContent=m,this.h()},l(h){e=A(h,"LABEL",{for:!0,"data-svelte-h":!0}),X(e)!=="svelte-vif08u"&&(e.textContent=l),n=R(h),i=A(h,"SELECT",{id:!0,name:!0,class:!0});var C=Q(i);s=A(C,"OPTION",{"data-svelte-h":!0}),X(s)!=="svelte-128lzjc"&&(s.textContent=r),c=A(C,"OPTION",{"data-svelte-h":!0}),X(c)!=="svelte-175cd0n"&&(c.textContent=o),a=A(C,"OPTION",{"data-svelte-h":!0}),X(a)!=="svelte-5g3ziw"&&(a.textContent=m),C.forEach(_),this.h()},h(){y(e,"for","type"),s.__value=1,G(s,s.__value),c.__value=2,G(c,c.__value),a.__value=3,G(a,a.__value),y(i,"id","type"),y(i,"name","type"),i.disabled=t[0],y(i,"class","bg-primary-500 rounded-md p-2 focus:ring-0 focus:ring-offset-0 focus:outline-none"),t[6].type===void 0&&Qe(()=>t[17].call(i))},m(h,C){k(h,e,C),k(h,n,C),k(h,i,C),b(i,s),b(i,c),b(i,a),ke(i,t[6].type,!0),f||(d=[Y(i,"keyup",t[10]),Y(i,"change",t[17])],f=!0)},p(h,C){C&1&&(i.disabled=h[0]),C&64&&ke(i,h[6].type)},d(h){h&&(_(e),_(n),_(i)),f=!1,_e(d)}}}function Oe(t){let e,l="Slash command Description",n,i,s,r,c,o,a,m=t[7].description&&Ne(t);return{c(){e=S("label"),e.textContent=l,n=q(),i=S("textarea"),r=q(),m&&m.c(),c=ce(),this.h()},l(f){e=A(f,"LABEL",{for:!0,"data-svelte-h":!0}),X(e)!=="svelte-10pjmlq"&&(e.textContent=l),n=R(f),i=A(f,"TEXTAREA",{name:!0,id:!0,placeholder:!0,class:!0}),Q(i).forEach(_),r=R(f),m&&m.l(f),c=ce(),this.h()},h(){y(e,"for","description"),y(i,"name","description"),y(i,"id","description"),i.disabled=s=t[0]&&t[3].isLoading,y(i,"placeholder","Command description"),y(i,"class","bg-primary-500 rounded-md p-2 focus:ring-0 focus:ring-offset-0 focus:outline-none")},m(f,d){k(f,e,d),k(f,n,d),k(f,i,d),G(i,t[6].description),k(f,r,d),m&&m.m(f,d),k(f,c,d),o||(a=[Y(i,"keyup",t[10]),Y(i,"input",t[19])],o=!0)},p(f,d){d&9&&s!==(s=f[0]&&f[3].isLoading)&&(i.disabled=s),d&64&&G(i,f[6].description),f[7].description?m?m.p(f,d):(m=Ne(f),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null)},d(f){f&&(_(e),_(n),_(i),_(r),_(c)),m&&m.d(f),o=!1,_e(a)}}}function Ne(t){let e,l=t[7].description+"",n;return{c(){e=S("span"),n=I(l),this.h()},l(i){e=A(i,"SPAN",{class:!0});var s=Q(e);n=T(s,l),s.forEach(_),this.h()},h(){y(e,"class","text-red-300 text-xs")},m(i,s){k(i,e,s),b(e,n)},p(i,s){s&128&&l!==(l=i[7].description+"")&&W(n,l)},d(i){i&&_(e)}}}function ot(t){let e,l,n,i,s,r,c="Command Name",o,a,m,f,d,h,C,P,Z="Allow in Dm",$,w,z,J,H,ee,x,u,g=t[0]?"Edit":"Create",E,p,O=B(t[6].type)+"",K,te,ne,be;function ye(v,V){return v[0]?nt:tt}let se=ye(t),U=se(t),M=t[0]&&we(),L=t[7].name&&Pe(t);function ge(v,V){return v[0]?rt:at}let re=ge(t),j=re(t),F=t[6].type===1&&Oe(t);return{c(){e=S("div"),l=S("form"),n=S("div"),i=S("h1"),U.c(),s=q(),r=S("label"),r.textContent=c,o=q(),a=S("input"),m=q(),M&&M.c(),f=q(),L&&L.c(),d=q(),j.c(),h=q(),C=S("label"),P=S("span"),P.textContent=Z,$=q(),w=S("input"),J=q(),H=S("div"),ee=q(),F&&F.c(),x=q(),u=S("button"),E=I(g),p=q(),K=I(O),te=I(" interaction"),this.h()},l(v){e=A(v,"DIV",{class:!0});var V=Q(e);l=A(V,"FORM",{});var ve=Q(l);n=A(ve,"DIV",{class:!0});var N=Q(n);i=A(N,"H1",{class:!0});var Ee=Q(i);U.l(Ee),Ee.forEach(_),s=R(N),r=A(N,"LABEL",{for:!0,"data-svelte-h":!0}),X(r)!=="svelte-10dwz9d"&&(r.textContent=c),o=R(N),a=A(N,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),m=R(N),M&&M.l(N),f=R(N),L&&L.l(N),d=R(N),j.l(N),h=R(N),C=A(N,"LABEL",{for:!0,class:!0});var ae=Q(C);P=A(ae,"SPAN",{class:!0,"data-svelte-h":!0}),X(P)!=="svelte-up74y2"&&(P.textContent=Z),$=R(ae),w=A(ae,"INPUT",{name:!0,id:!0,class:!0,type:!0}),ae.forEach(_),J=R(N),H=A(N,"DIV",{class:!0}),Q(H).forEach(_),ee=R(N),F&&F.l(N),x=R(N),u=A(N,"BUTTON",{type:!0,class:!0});var ie=Q(u);E=T(ie,g),p=R(ie),K=T(ie,O),te=T(ie," interaction"),ie.forEach(_),N.forEach(_),ve.forEach(_),V.forEach(_),this.h()},h(){y(i,"class","text-xl font-bold"),y(r,"for","name"),y(a,"type","text"),y(a,"name","name"),y(a,"id","name"),a.disabled=t[0],y(a,"placeholder","Command name"),y(a,"class","bg-primary-500 rounded-md p-2 focus:ring-0 focus:ring-offset-0 focus:outline-none"),y(P,"class","mr-2"),y(w,"name","dm_permission"),y(w,"id","dm_permission"),w.disabled=z=t[0]&&t[3].isLoading,y(w,"class","h-5 w-5 bg-primary-500 rounded focus:ring-0 focus:ring-offset-0 focus:outline-none"),y(w,"type","checkbox"),y(C,"for","dm_permission"),y(C,"class","inline-flex items-center"),y(H,"class","w-full h-1 bg-primary-800 rounded-lg"),y(u,"type","submit"),y(u,"class","bg-blurple-600 hover:bg-blurple-700 p-2 rounded-lg"),y(n,"class","bg-primary-700 p-2 flex flex-col gap-3 rounded-lg"),y(e,"class","m-2")},m(v,V){k(v,e,V),b(e,l),b(l,n),b(n,i),U.m(i,null),b(n,s),b(n,r),b(n,o),b(n,a),G(a,t[6].name),b(n,m),M&&M.m(n,null),b(n,f),L&&L.m(n,null),b(n,d),j.m(n,null),b(n,h),b(n,C),b(C,P),b(C,$),b(C,w),G(w,t[6].dm_permission),b(n,J),b(n,H),b(n,ee),F&&F.m(n,null),b(n,x),b(n,u),b(u,E),b(u,p),b(u,K),b(u,te),ne||(be=[Y(a,"keyup",t[10]),Y(a,"input",t[16]),Y(w,"keyup",t[10]),Y(w,"change",t[18]),Y(l,"submit",t[11])],ne=!0)},p(v,[V]){se===(se=ye(v))&&U?U.p(v,V):(U.d(1),U=se(v),U&&(U.c(),U.m(i,null))),V&1&&(a.disabled=v[0]),V&64&&a.value!==v[6].name&&G(a,v[6].name),v[0]?M||(M=we(),M.c(),M.m(n,f)):M&&(M.d(1),M=null),v[7].name?L?L.p(v,V):(L=Pe(v),L.c(),L.m(n,d)):L&&(L.d(1),L=null),re===(re=ge(v))&&j?j.p(v,V):(j.d(1),j=re(v),j&&(j.c(),j.m(n,h))),V&9&&z!==(z=v[0]&&v[3].isLoading)&&(w.disabled=z),V&64&&G(w,v[6].dm_permission),v[6].type===1?F?F.p(v,V):(F=Oe(v),F.c(),F.m(n,x)):F&&(F.d(1),F=null),V&1&&g!==(g=v[0]?"Edit":"Create")&&W(E,g),V&64&&O!==(O=B(v[6].type)+"")&&W(K,O)},i:ue,o:ue,d(v){v&&_(e),U.d(),M&&M.d(),L&&L.d(),j.d(),F&&F.d(),ne=!1,_e(be)}}}function ut(t,e,l){let n,i,s,r,c,o,a,m,f,d=ue,h=()=>(d(),d=Re(a,p=>l(3,f=p)),a),C,P,Z;de(t,Be,p=>l(15,C=p)),t.$$.on_destroy.push(()=>d());const $=Ie(ze),{form:w,errors:z,handleChange:J,handleSubmit:H,state:ee}=et({initialValues:{type:1,name:"",description:"",dm_permission:!0},validate:p=>{var K;let O={};return console.log(p),p.name===""?O.name=`${B(p.type||1)} interaction must have a name`:((K=p==null?void 0:p.name)==null?void 0:K.length)<3&&(O.name="Interaction name length must be greater than 3"),p.description===""&&p.type==1&&(O.description="Description is required for chat input interactions"),O},onSubmit:p=>{const O={type:p.type,name:p.name};p.type===1&&(O.description=p.description),i==="global"&&(O.dm_permission=p.dm_permission),console.log("send",O),Je.promise(Ce(r,{method:"POST",data:O}),{loading:`Adding ${B(p.type)} ${p.name}`,success:`Added ${B(p.type)} ${p.name}, you can continue adding commands`,error:`Error occurred while adding "${p.name}"`})}});de(t,w,p=>l(6,P=p)),de(t,z,p=>l(7,Z=p));function x(){P.name=this.value,w.set(P)}function u(){P.type=Me(this),w.set(P)}function g(){P.dm_permission=this.value,w.set(P)}function E(){P.description=this.value,w.set(P)}return t.$$.update=()=>{t.$$.dirty&32768&&l(14,n=C.url.searchParams),t.$$.dirty&16384&&l(2,i=n.get("guildId")||"global"),t.$$.dirty&16384&&l(1,s=n.get("commandId")),t.$$.dirty&4&&l(12,r=i!=="global"?`applications/${$.id}/guilds/${i}/commands`:`applications/${$.id}/commands`),t.$$.dirty&2&&l(0,c=typeof s=="string"),t.$$.dirty&6&&l(13,o=["app.editor.command",i,s]),t.$$.dirty&12291&&h(l(5,a=He({queryKey:o,queryFn:async()=>(await Ce(`${r}/${s}`)).data,enabled:c,onSuccess(p){console.log("received",p),w.set({name:p.name,type:p.type,description:p.description,dm_permission:p.dm_permission})}}))),t.$$.dirty&8&&l(4,m=f.data||{})},[c,s,i,f,m,a,P,Z,w,z,J,H,r,o,n,C,x,u,g,E]}class vt extends Ue{constructor(e){super(),je(this,e,ut,ot,qe,{})}}export{vt as component};
